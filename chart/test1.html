<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>JavaScript Chart</title>
  <!-- including ECharts file -->
  <script src="../echarts-all.js"></script>
</head>

<body>

  <h1>Chart</h1>
  <table class="jsonTable" border="1">
    <thead>
      <th>row</th>
      <th>country_region_code</th>
      <th>country_region</th>
      <th>region</th>
      <th>place_id</th>
      <th>date</th>
      <th>symptom_Abdominal_obesityi</th>
    </thead>
    <tbody id="tableArea">

    </tbody>
  </table>

  <div id='result'></div>
  <!-- chartarea 높이와 너비가 지정된 Dom 을 생성합니다 -->
  <div id="chartArea" style="width:700px; height:500px;"></div>


  <p>
    <span>시각화유형</span>
  </p>
  <!-- <select name="viewType" id="viewType" onchange="selectChart()"> -->
  <select name="viewType" id="viewType">
    <option value="0" selected disabled>차트 선택</option>
    <option id="id-line" value="1">line chart</option>
    <option id="id-bar" value="2">bar chart</option>

  </select>
  <br>
  <br>

  <p>
    <span>title</span>
  </p>
  <input id='title' onkeyup='printTitle()' />

  <p>
    <span>legend</span>
  </p>

  <label for="radioYes">Yes</label>
  <input type="radio" id="radioYes" checked />
  <label for="radioNo">No</label>
  <input type="radio" id="radioNo" />

  <p>
    <span>X axis</span>
  </p>
  <input id='inputX' />
  <p>
    <span>Y axis</span>
  </p>
  <input id='inputY' />

  <p>
    <button id="btnCancle" onclick="">취소</button>
    <button id="btnConfirm" onclick="selectChart()">확인</button>

  </p>

  <script src="./chartInit.js"></script>

  <!-- json data 로드 -->
  <script>
    let chartData = [{
        "row": 1,
        "country_region_code": "NZ",
        "country_region": "New Zealand",
        "region": null,
        "place_id": "ChIJh5Z3Fw4gLG0RM0dqdeIY1rE",
        "date": "2021-04-30",
        "symptom_Abdominal_obesityi": 4.5
      },
      {
        "row": 2,
        "country_region_code": "IE",
        "country_region": "Ireland",
        "region": null,
        "place_id": "ChIJ-ydAXOS6WUgRCPTbzjQSfM8",
        "date": "2021-04-30",
        "symptom_Abdominal_obesityi": 3.25
      },
      {
        "row": 3,
        "country_region_code": "GB",
        "country_region": "United Kingdom",
        "region": null,
        "place_id": "ChIJqZHHQhE7WgIReiWIMkOg",
        "date": "2021-04-30",
        "symptom_Abdominal_obesityi": 1.4
      },
      {
        "row": 4,
        "country_region_code": "AU",
        "country_region": "Australia",
        "region": null,
        "place_id": "ChIJCzYy5IS16lQRQrfeQ5K5Oxw",
        "date": "2021-04-30",
        "symptom_Abdominal_obesityi": 1.73
      },
      {
        "row": 5,
        "country_region_code": "US",
        "country_region": "United States",
        "region": null,
        "place_id": "ChIJh5Z3Fw4gLG0RM0dqdeIY1rE",
        "date": "2021-04-30",
        "symptom_Abdominal_obesityi": 4.08
      },
      {
        "row": 6,
        "country_region_code": "SG",
        "country_region": "Singapore",
        "region": null,
        "place_id": "ChIJ-ydAXOS6WUgRCPTbzjQSfM8",
        "date": "2021-04-30",
        "symptom_Abdominal_obesityi": 3.6
      },
      {
        "row": 7,
        "country_region_code": "NZ",
        "country_region": "New Zealand",
        "region": null,
        "place_id": "ChIJqZHHQhE7WgIReiWIMkOg",
        "date": "2020-11-28",
        "symptom_Abdominal_obesityi": 5
      },
      {
        "row": 8,
        "country_region_code": "IE",
        "country_region": "Ireland",
        "region": null,
        "place_id": "ChIJCzYy5IS16lQRQrfeQ5K5Oxw",
        "date": "2020-11-28",
        "symptom_Abdominal_obesityi": 2.85
      },
      {
        "row": 9,
        "country_region_code": "GB",
        "country_region": "United Kingdom",
        "region": null,
        "place_id": "ChIJh5Z3Fw4gLG0RM0dqdeIY1rE",
        "date": "2020-11-28",
        "symptom_Abdominal_obesityi": 1.95
      },
      {
        "row": 10,
        "country_region_code": "AU",
        "country_region": "Australia",
        "region": null,
        "place_id": "ChIJ-ydAXOS6WUgRCPTbzjQSfM8",
        "date": "2020-11-28",
        "symptom_Abdominal_obesityi": 4.08
      },
      {
        "row": 11,
        "country_region_code": "US",
        "country_region": "United States",
        "region": null,
        "place_id": "ChIJqZHHQhE7WgIReiWIMkOg",
        "date": "2019-05-16",
        "symptom_Abdominal_obesityi": 3.6
      },
      {
        "row": 12,
        "country_region_code": "SG",
        "country_region": "Singapore",
        "region": null,
        "place_id": "ChIJCzYy5IS16lQRQrfeQ5K5Oxw",
        "date": "2019-05-16",
        "symptom_Abdominal_obesityi": 5
      },
      {
        "row": 13,
        "country_region_code": "IE",
        "country_region": "Ireland",
        "region": null,
        "place_id": "ChIJqZHHQhE7WgIReiWIMkOg",
        "date": "2019-05-16",
        "symptom_Abdominal_obesityi": 1.4
      },
      {
        "row": 14,
        "country_region_code": "US",
        "country_region": "United States",
        "region": null,
        "place_id": "ChIJqZHHQhE7WgIReiWIMkOg",
        "date": "2019-05-16",
        "symptom_Abdominal_obesityi": 3.6
      },
      {
        "row": 15,
        "country_region_code": "SG",
        "country_region": "Singapore",
        "region": null,
        "place_id": "ChIJCzYy5IS16lQRQrfeQ5K5Oxw",
        "date": "2019-05-16",
        "symptom_Abdominal_obesityi": 5
      }
    ]

    
    buildTable1(chartData)

    function buildTable1(data) {
      let table = document.getElementById('tableArea')
      for (let i = 0; i < data.length; i++) {
        let row = data[i].row;
        let country_region_code = data[i].country_region_code;
        let country_region = data[i].country_region;
        let region = data[i].region;
        let place_id = data[i].place_id;
        let date = data[i].date;
        let symptom_Abdominal_obesityi = data[i].symptom_Abdominal_obesityi;

        let tRow = document.createTextNode(row);
        let tCountry_region_code = document.createTextNode(country_region_code);
        let tCountry_region = document.createTextNode(country_region);
        let tRegion = document.createTextNode(region);

        let tPlace_id = document.createTextNode(place_id);
        let tDate = document.createTextNode(date);
        let tSymptom_Abdominal_obesityi = document.createTextNode(symptom_Abdominal_obesityi);

        let tr = document.createElement("tr");
        let td1 = document.createElement("td");
        let td2 = document.createElement("td");
        let td3 = document.createElement("td");
        let td4 = document.createElement("td");
        let td5 = document.createElement("td");
        let td6 = document.createElement("td");
        let td7 = document.createElement("td");

        td1.appendChild(tRow);
        td2.appendChild(tCountry_region_code);
        td3.appendChild(tCountry_region);
        td4.appendChild(tRegion);
        td5.appendChild(tPlace_id);
        td6.appendChild(tDate);
        td7.appendChild(tSymptom_Abdominal_obesityi);

        tr.appendChild(td1);
        tr.appendChild(td2);
        tr.appendChild(td3);
        tr.appendChild(td4);
        tr.appendChild(td5);
        tr.appendChild(td6);
        tr.appendChild(td7);

        let tbody = document.getElementsByTagName("tbody")[0];

        tbody.appendChild(tr);
      }
    }

    //중복제거, sao값 더하기
    let mapData = {};
    for (data of chartData) {
      if (data.country_region_code in mapData) {
        mapData[data.country_region_code].symptom_Abdominal_obesityi += data.symptom_Abdominal_obesityi;
      } else {
        mapData[data.country_region_code] = data;
      }
    }

    console.table(mapData);
    
  </script>

</body>

</html>